{"ast":null,"code":"var _jsxFileName = \"D:\\\\FantaShop\\\\React\\\\src\\\\items\\\\Items.js\",\n    _s = $RefreshSig$();\n\nimport { Container, Title, Subtitle, Button, Inliner, Grid } from '../components/Components';\nimport styled from 'styled-components';\nimport Item from '../components/Item';\nimport Popup from '../components/Popup';\nimport Filter from '../components/Filter';\nimport { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst levenshtein = require('fast-levenshtein');\n\nconst Items = ({\n  colors,\n  fontSizes,\n  accessToken,\n  isMobile\n}) => {\n  _s();\n\n  const [items, setItems] = useState([]);\n  const [user, setUser] = useState([]);\n  const [filteredItems, setFilteredItems] = useState([]);\n  const [isBlured, setIsBlured] = useState(false);\n  const [activeItem, setActiveItem] = useState();\n  const [filterIsOpen, setFilterIsOpen] = useState(false);\n  const [maxItemPrice, setMaxItemPrice] = useState(0);\n  const [currentMaxPrice, setCurrentMaxPrice] = useState(0);\n  const filter = useRef();\n  const blur = 10;\n\n  const handleSearch = () => {\n    if (!isBlured) {\n      setFilteredItems(items.filter(item => item.aliases.toLowerCase().includes(filter.current.value.toLowerCase()) && parseFloat(item.price) * 1000 >= currentMaxPrice || item.title.toLowerCase().includes(filter.current.value.toLowerCase()) && parseFloat(item.price) * 1000 >= currentMaxPrice));\n    }\n  };\n\n  const handleFilter = () => {\n    if (!isBlured) {\n      setFilterIsOpen(!filterIsOpen);\n    }\n  };\n\n  const focusPage = e => {\n    if (e.target.tagName.toLowerCase() !== 'button') {\n      setIsBlured(false);\n    }\n  };\n\n  useEffect(() => {\n    fetch(process.env.REACT_APP_API_URL + `shop/items`).then(res => res.json()).then(items => {\n      setItems(items);\n      setFilteredItems(items);\n    });\n    fetch(process.env.REACT_APP_API_URL + `user/getuser/` + accessToken).then(res => res.json()).then(user => {\n      setUser(user);\n    });\n  }, []);\n  useEffect(() => {}, [currentMaxPrice]);\n  window.addEventListener('load', () => {\n    if (!accessToken) {\n      window.location = \"/shop\";\n    }\n  });\n  window.addEventListener('keydown', function (event) {\n    if (event == null || event.key == null || event == undefined || event.key == undefined) {\n      return;\n    }\n\n    if (event.key.toLowerCase() == 'escape') {\n      setIsBlured(false);\n      setFilterIsOpen(false);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isBlured && /*#__PURE__*/_jsxDEV(Popup, {\n      activeItem: activeItem,\n      setIsBlured: setIsBlured,\n      colors: colors,\n      quantity: \"true\",\n      type: \"items\",\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      center: \"vertically\",\n      isMobile: isMobile,\n      style: {\n        filter: isBlured && `blur(${blur}px)`,\n        opacity: isBlured ? 0.3 : 1,\n        transition: 'filter 0.4s'\n      },\n      onClick: focusPage,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          underlineColors: [colors.$lightPurple, colors.$darkPurple],\n          fontSize: fontSizes.$bigText,\n          fontWeight: \"700\",\n          color: colors.$text,\n          children: \"Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Subtitle, {\n          fontSize: fontSizes.$smallText,\n          fontWeight: \"500\",\n          style: {\n            marginTop: '30px'\n          },\n          children: \"Acheter des items parmis un large catalogue d\\u2019items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Inliner, {\n          gap: \"20px\",\n          style: {\n            marginTop: '50px',\n            flexWrap: isMobile && 'wrap',\n            justifyContent: isMobile && 'center'\n          },\n          wrap: \"true\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            color: colors.$darkPurple,\n            textColor: colors.$text,\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: filter,\n              type: \"text\",\n              placeholder: \"Rechercher un item\",\n              onInput: handleSearch\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: colors.$text,\n            onClick: handleFilter,\n            children: \"Filtrer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), filterIsOpen && /*#__PURE__*/_jsxDEV(Filter, {\n            maxItemPrice: maxItemPrice,\n            colors: colors,\n            setCurrentMaxPrice: setCurrentMaxPrice,\n            currentMaxPrice: currentMaxPrice,\n            handleSearch: handleSearch,\n            isMobile: isMobile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      columns: \"4\",\n      gap: \"40px\",\n      style: {\n        filter: isBlured && `blur(${blur}px)`,\n        opacity: isBlured ? 0.3 : 1,\n        transition: 'filter 0.4s'\n      },\n      onClick: focusPage,\n      children: [filteredItems.length === 0 && /*#__PURE__*/_jsxDEV(Subtitle, {\n        fontSize: fontSizes.$smallText,\n        fontWeight: \"500\",\n        children: \"D\\xE9sol\\xE9, rien n'a \\xE9t\\xE9 trouv\\xE9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, this), filteredItems.map(item => {\n        parseFloat(item.price) * 1000 > maxItemPrice && setMaxItemPrice(parseFloat(item.price) * 1000);\n        return /*#__PURE__*/_jsxDEV(Item, {\n          id: item.id,\n          title: item.title,\n          picture: `${process.env.PUBLIC_URL}${item.picture}`,\n          price: item.price,\n          setIsBlured: setIsBlured,\n          colors: colors,\n          enchantments: item.enchantments,\n          maxQuantity: item.maxQuantity,\n          setActiveItem: setActiveItem,\n          page: \"items\"\n        }, item.title + Math.random(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Items, \"5Pue9vxqCjSPKfHoNZRB8KhAeOI=\");\n\n_c = Items;\nconst Search = styled.div`\n  min-width: 250px;\n  width: 80%;\n  & input {\n    border: solid 1px ${props => props.color ? props.color : 'white'};\n    color: ${props => props.textColor ? props.textColor : 'white'};\n    background: transparent;\n    width: 100%;\n    padding: 11px 15px;\n    outline: none;\n    border-radius: 10px;\n    transition: color 0.4s;\n  }\n`;\n_c2 = Search;\nexport default Items;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Items\");\n$RefreshReg$(_c2, \"Search\");","map":{"version":3,"sources":["D:/FantaShop/React/src/items/Items.js"],"names":["Container","Title","Subtitle","Button","Inliner","Grid","styled","Item","Popup","Filter","useState","useEffect","useRef","levenshtein","require","Items","colors","fontSizes","accessToken","isMobile","items","setItems","user","setUser","filteredItems","setFilteredItems","isBlured","setIsBlured","activeItem","setActiveItem","filterIsOpen","setFilterIsOpen","maxItemPrice","setMaxItemPrice","currentMaxPrice","setCurrentMaxPrice","filter","blur","handleSearch","item","aliases","toLowerCase","includes","current","value","parseFloat","price","title","handleFilter","focusPage","e","target","tagName","fetch","process","env","REACT_APP_API_URL","then","res","json","window","addEventListener","location","event","key","undefined","opacity","transition","$lightPurple","$darkPurple","$bigText","$text","$smallText","marginTop","flexWrap","justifyContent","length","map","id","PUBLIC_URL","picture","enchantments","maxQuantity","Math","random","Search","div","props","color","textColor"],"mappings":"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","sourcesContent":["import {\r\n  Container,\r\n  Title,\r\n  Subtitle,\r\n  Button,\r\n  Inliner,\r\n  Grid,\r\n} from '../components/Components'\r\nimport styled from 'styled-components'\r\nimport Item from '../components/Item'\r\nimport Popup from '../components/Popup'\r\nimport Filter from '../components/Filter'\r\nimport { useState, useEffect, useRef } from 'react'\r\n\r\nconst levenshtein = require('fast-levenshtein');\r\n\r\nconst Items = ({ colors, fontSizes, accessToken, isMobile }) => {\r\n  const [items, setItems] = useState([])\r\n  const [user, setUser] = useState([])\r\n  const [filteredItems, setFilteredItems] = useState([])\r\n  const [isBlured, setIsBlured] = useState(false)\r\n  const [activeItem, setActiveItem] = useState()\r\n  const [filterIsOpen, setFilterIsOpen] = useState(false)\r\n  const [maxItemPrice, setMaxItemPrice] = useState(0)\r\n  const [currentMaxPrice, setCurrentMaxPrice] = useState(0)\r\n\r\n  const filter = useRef()\r\n  const blur = 10\r\n\r\n  \r\n  const handleSearch = () => {\r\n    if(!isBlured) {\r\n      setFilteredItems(\r\n        items.filter(\r\n          item => \r\n            (item.aliases\r\n              .toLowerCase()\r\n              .includes(filter.current.value.toLowerCase()) &&\r\n              parseFloat(item.price) * 1000 >= currentMaxPrice) ||\r\n            (item.title\r\n              .toLowerCase()\r\n              .includes(filter.current.value.toLowerCase()) &&\r\n              parseFloat(item.price) * 1000 >= currentMaxPrice)\r\n          \r\n        )\r\n      )\r\n    }\r\n  }\r\n\r\n  const handleFilter = () => {\r\n    if(!isBlured) {\r\n      setFilterIsOpen(!filterIsOpen)\r\n    }\r\n  }\r\n\r\n  const focusPage = (e) => {\r\n    if(e.target.tagName.toLowerCase() !== 'button') {\r\n      setIsBlured(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetch(process.env.REACT_APP_API_URL + `shop/items`)\r\n      .then(res => res.json())\r\n      .then(items => {\r\n        setItems(items)\r\n        setFilteredItems(items)\r\n      })\r\n\r\n    fetch(process.env.REACT_APP_API_URL + `user/getuser/` + accessToken)\r\n      .then(res => res.json())\r\n      .then(user => {\r\n        setUser(user)\r\n      })\r\n    \r\n  }, [])\r\n\r\n  useEffect(() => {}, [currentMaxPrice])\r\n\r\n\r\n  window.addEventListener('load', () => {\r\n    if(!accessToken) {\r\n      window.location = \"/shop\"\r\n    }\r\n  })\r\n\r\n  window.addEventListener('keydown', function(event){\r\n    if(event == null || event.key == null || event == undefined || event.key == undefined) {\r\n      return\r\n    }\r\n\t\tif(event.key.toLowerCase() == 'escape') {\r\n      setIsBlured(false)\r\n      setFilterIsOpen(false)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <>\r\n      {isBlured && (\r\n        <Popup\r\n          activeItem={activeItem}\r\n          setIsBlured={setIsBlured}\r\n          colors={colors}\r\n          quantity=\"true\"\r\n          type=\"items\"\r\n          user={user}\r\n        />\r\n      )}\r\n\r\n      <Container\r\n        center=\"vertically\"\r\n        isMobile={isMobile}\r\n        style={{\r\n          filter: isBlured && `blur(${blur}px)`,\r\n          opacity: isBlured ? 0.3 : 1,\r\n          transition: 'filter 0.4s',\r\n        }} onClick={focusPage}>\r\n        <div>\r\n          <Title\r\n            underlineColors={[colors.$lightPurple, colors.$darkPurple]}\r\n            fontSize={fontSizes.$bigText}\r\n            fontWeight=\"700\"\r\n            color={colors.$text}>\r\n            Items\r\n          </Title>\r\n          <Subtitle\r\n            fontSize={fontSizes.$smallText}\r\n            fontWeight=\"500\"\r\n            style={{ marginTop: '30px' }}>\r\n            Acheter des items parmis un large catalogue d’items\r\n          </Subtitle>\r\n          <Inliner gap=\"20px\" style={{ marginTop: '50px', flexWrap: isMobile && 'wrap', justifyContent: isMobile && 'center' }} wrap=\"true\">\r\n            <Search color={colors.$darkPurple} textColor={colors.$text}>\r\n              <input\r\n                ref={filter}\r\n                type=\"text\"\r\n                placeholder=\"Rechercher un item\"\r\n                onInput={handleSearch}\r\n              />\r\n            </Search>\r\n            <Button color={colors.$text} onClick={handleFilter}>\r\n              Filtrer\r\n            </Button>\r\n            {filterIsOpen && (\r\n              <Filter\r\n                maxItemPrice={maxItemPrice}\r\n                colors={colors}\r\n                setCurrentMaxPrice={setCurrentMaxPrice}\r\n                currentMaxPrice={currentMaxPrice}\r\n                handleSearch={handleSearch}\r\n                isMobile={isMobile}\r\n              />\r\n            )}\r\n          </Inliner>\r\n        </div>\r\n      </Container>\r\n      <Grid\r\n        columns=\"4\"\r\n        gap=\"40px\"\r\n        style={{\r\n          filter: isBlured && `blur(${blur}px)`,\r\n          opacity: isBlured ? 0.3 : 1,\r\n          transition: 'filter 0.4s',\r\n        }} onClick={focusPage}>\r\n        {filteredItems.length === 0 && (\r\n          <Subtitle fontSize={fontSizes.$smallText} fontWeight=\"500\">\r\n            Désolé, rien n'a été trouvé\r\n          </Subtitle>\r\n        )}\r\n        {filteredItems.map(item => {\r\n          parseFloat(item.price) * 1000 > maxItemPrice &&\r\n            setMaxItemPrice(parseFloat(item.price) * 1000)\r\n          return (\r\n            <Item\r\n              key={item.title + Math.random()}\r\n              id={item.id}\r\n              title={item.title}\r\n              picture={`${process.env.PUBLIC_URL}${item.picture}`}\r\n              price={item.price}\r\n              setIsBlured={setIsBlured}\r\n              colors={colors}\r\n              enchantments={item.enchantments}\r\n              maxQuantity={item.maxQuantity}\r\n              setActiveItem={setActiveItem}\r\n              page=\"items\"\r\n            />\r\n          )\r\n        })}\r\n      </Grid>\r\n    </>\r\n  )\r\n}\r\n\r\nconst Search = styled.div`\r\n  min-width: 250px;\r\n  width: 80%;\r\n  & input {\r\n    border: solid 1px ${props => (props.color ? props.color : 'white')};\r\n    color: ${props => (props.textColor ? props.textColor : 'white')};\r\n    background: transparent;\r\n    width: 100%;\r\n    padding: 11px 15px;\r\n    outline: none;\r\n    border-radius: 10px;\r\n    transition: color 0.4s;\r\n  }\r\n`\r\n\r\nexport default Items\r\n"]},"metadata":{},"sourceType":"module"}