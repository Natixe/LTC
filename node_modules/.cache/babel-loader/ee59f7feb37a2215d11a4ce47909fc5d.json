{"ast":null,"code":"var _jsxFileName = \"D:\\\\FantaShop\\\\React\\\\src\\\\components\\\\Popup.js\",\n    _s = $RefreshSig$();\n\nimport styled, { keyframes } from 'styled-components';\nimport { Paragraph, Button2, BuyButton, Inliner, Subtitle } from '../components/Components';\nimport { v4 as uuidv4 } from 'uuid';\nimport { useState, useEffect, useRef } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst send = keyframes`\n  0% {\n    opacity: 0;\n    left: 3px;\n  }\n\n  20% {\n    opacity: 1;\n  }\n\n  80% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n    left: calc(100% - 28px);\n  }\n`;\n\nconst Popup = ({\n  activeItem,\n  colors,\n  setIsBlured,\n  quantity,\n  type,\n  user\n}) => {\n  _s();\n\n  const {\n    id,\n    maxQuantity\n  } = activeItem;\n  const [isAnimate, setIsAnimate] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const form = useRef();\n\n  const handleCancel = () => {\n    setIsBlured(false);\n  };\n\n  const handleBuy = e => {\n    e.preventDefault();\n    setIsError(false);\n    let btn = document.querySelector('.buyButton');\n    let width = btn.offsetWidth;\n    let emptyFields = false;\n    const prevData = {\n      pseudo: '',\n      discord: '',\n      quantity: 0,\n      comment: ''\n    };\n    const fields = [].slice.call(form.current.querySelectorAll('.field'));\n    fields.forEach(field => {\n      if (field.value === '' || field.value > maxQuantity || field.value < 1) {\n        if (field.name !== 'comment') emptyFields = true;\n      }\n\n      prevData[field.name] = field.value;\n    });\n\n    if (!emptyFields) {\n      prevData['pseudo'] = user.username;\n      prevData['discord'] = user.username + \"#\" + user.discriminator;\n      e.preventDefault();\n      const uuid = uuidv4();\n      console.log(`Data can be sent\\nOrder number %c${uuid}`, 'background: black; color: white; padding: 5px;');\n      setIsAnimate(true);\n      setTimeout(() => {\n        btn.children[0].style.transition = \"opacity 0.3s\";\n        btn.children[0].style.opacity = \"0\";\n        btn.style.width = width + \"px\";\n        setTimeout(() => {\n          btn.children[0].innerHTML = \"Réussis\";\n          btn.style.background = colors.$green;\n          btn.children[0].style.opacity = \"1\";\n          setTimeout(() => {\n            fetch(process.env.REACT_APP_API_URL + \"shop/buy/\" + type + \"/\" + id, {\n              method: 'POST',\n              headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                user: {\n                  username: prevData.pseudo,\n                  discord: prevData.discord\n                },\n                command: {\n                  quantity: prevData.quantity,\n                  commentaire: prevData.comment,\n                  uuid: uuid\n                }\n              })\n            }).then(res => res.json()).then(data => {\n              window.location = `/success?data=${btoa(JSON.stringify(data))}`;\n            });\n          }, 400);\n        }, 1400);\n      }, 200);\n    } else {\n      setIsError(true);\n      setTimeout(() => {\n        setIsError(false);\n      }, 400);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    isError: isError,\n    children: [/*#__PURE__*/_jsxDEV(Subtitle, {\n      style: {\n        alignSelf: 'flex-start'\n      },\n      fontSize: \"1.1em\",\n      fontWeight: \"600\",\n      color: colors.$darkPurple,\n      children: activeItem.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paragraph, {\n      fontSize: \"0.7em\",\n      color: \"gray\",\n      children: [\"A partir de \", new Intl.NumberFormat('de-DE', {\n        style: 'currency',\n        currency: 'USD',\n        maximumFractionDigits: 0\n      }).format(activeItem.price)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      ref: form,\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        isError: isError,\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          src: `${process.env.PUBLIC_URL}/images/user.svg`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"pseudo\",\n          placeholder: \"Pseudo en jeu\",\n          className: \"field\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        style: {\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          src: `${process.env.PUBLIC_URL}/images/user.svg`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          defaultValue: user.username + \"#\" + user.discriminator,\n          name: \"discord\",\n          className: \"field\",\n          disabled: true,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), quantity === 'true' && /*#__PURE__*/_jsxDEV(Input, {\n        style: {\n          marginTop: '20px',\n          width: '40%'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          placeholder: \"Quantit\\xE9\",\n          style: {\n            width: '100%'\n          },\n          className: \"field\",\n          name: \"quantity\",\n          min: \"1\",\n          max: maxQuantity,\n          defaultValue: \"1\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Paragraph, {\n        color: \"black\",\n        fontSize: \"0.6em\",\n        style: {\n          marginTop: '20px',\n          marginLeft: '10px'\n        },\n        children: \"Commentaires (facultatif)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        style: {\n          marginTop: '5px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"field\",\n          name: \"comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Inliner, {\n        style: {\n          marginTop: '20px',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button2, {\n          color: colors.$darkOrange,\n          onClick: handleCancel,\n          style: {\n            opacity: isAnimate && '0',\n            transition: 'opacity 0.6s'\n          },\n          children: \"Annuler\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BuyButton, {\n          color: \"white\",\n          onClick: e => handleBuy(e),\n          background: isAnimate ? colors.$blue : colors.$darkOrange,\n          className: \"buyButton\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Acheter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SendAnimateImage, {\n            src: \"/images/send.svg\",\n            style: {\n              animationPlayState: isAnimate && 'running',\n              animationDelay: '0.5s'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Popup, \"6gE58GiNqyUaBYOg0TbRmIfeUDQ=\");\n\n_c = Popup;\nconst show = keyframes`\n  from {\n    opacity: 0;\n    margin-top: 20px;\n  }\n\n  to {\n    opacity: 1;\n    margin-top: 0;\n  }\n`;\nconst shake = keyframes`\n  0% {\n    transform: translate(-50%, -50%);\n  }\n\n  25% {\n    transform: translate(-51%, -50%);\n  }\n\n  50% {\n    transform: translate(-49.5%, -50.7%);\n  }\n  \n  75% {\n    transform: translate(-50.2%, -48.7%);\n  }\n\n  100% {\n    transform: translate(-50%, -50%);\n  }\n`;\nconst SendAnimateImage = styled.img`\n  position: absolute;\n  width: 25px;\n  left: 3px;\n  bottom: 0;\n  top: 0;\n  margin-top: auto;\n  margin-bottom: auto;\n  opacity: 0;\n  transition: all .4s;\n  animation: ${send} 1.2s ease-in-out forwards;\n  animation-play-state: paused;\n`;\n_c2 = SendAnimateImage;\nconst Card = styled.div`\n  border: ${props => props.isError && 'solid 1px #EE3939'};\n  position: fixed;\n  z-index: 1;\n  width: 400px;\n  background: white;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  padding: 30px;\n  border-radius: 10px;\n\n  opacity: 0;\n  margin-top: 20px;\n\n  animation: ${show} 0.3s ease-in-out forwards, ${shake} 0.4s ease-in-out infinite ${props => props.isError ? 'running' : 'paused'};\n\n  @media (max-width: 768px) {\n    width: 90%;\n    min-width: 300px;\n  }\n`;\n_c3 = Card;\nconst Icon = styled.img`\n  width: 25px;\n  height: 25px;\n  margin-left: 10px;\n  position: relative;\n  padding-right: 10px;\n  border-right: solid 1px #00000088;\n`;\n_c4 = Icon;\nconst Input = styled.div`\n  border: solid 1px ${props => props.isError ? '#EE3939' : 'black'};\n  border-radius: 10px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  transition: border .2s;\n\n  & input {\n    flex: 1;\n    border: none;\n    outline: none;\n    padding: 10px;\n  }\n\n  & textarea {\n    width: 100%;\n    height: 200px;\n    resize: vertical;\n    border: none;\n    outline: none;\n    padding: 10px;\n  }\n`;\n_c5 = Input;\nexport default Popup;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Popup\");\n$RefreshReg$(_c2, \"SendAnimateImage\");\n$RefreshReg$(_c3, \"Card\");\n$RefreshReg$(_c4, \"Icon\");\n$RefreshReg$(_c5, \"Input\");","map":{"version":3,"sources":["D:/FantaShop/React/src/components/Popup.js"],"names":["styled","keyframes","Paragraph","Button2","BuyButton","Inliner","Subtitle","v4","uuidv4","useState","useEffect","useRef","FontAwesomeIcon","send","Popup","activeItem","colors","setIsBlured","quantity","type","user","id","maxQuantity","isAnimate","setIsAnimate","isError","setIsError","form","handleCancel","handleBuy","e","preventDefault","btn","document","querySelector","width","offsetWidth","emptyFields","prevData","pseudo","discord","comment","fields","slice","call","current","querySelectorAll","forEach","field","value","name","username","discriminator","uuid","console","log","setTimeout","children","style","transition","opacity","innerHTML","background","$green","fetch","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","command","commentaire","then","res","json","data","window","location","btoa","alignSelf","$darkPurple","title","Intl","NumberFormat","currency","maximumFractionDigits","format","price","PUBLIC_URL","marginTop","marginLeft","justifyContent","$darkOrange","$blue","animationPlayState","animationDelay","show","shake","SendAnimateImage","img","Card","div","props","Icon","Input"],"mappings":"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","sourcesContent":["import styled, { keyframes } from 'styled-components'\r\nimport { Paragraph, Button2, BuyButton, Inliner, Subtitle } from '../components/Components'\r\nimport { v4 as uuidv4 } from 'uuid'\r\nimport { useState, useEffect, useRef } from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nconst send = keyframes`\r\n  0% {\r\n    opacity: 0;\r\n    left: 3px;\r\n  }\r\n\r\n  20% {\r\n    opacity: 1;\r\n  }\r\n\r\n  80% {\r\n    opacity: 1;\r\n  }\r\n\r\n  100% {\r\n    opacity: 0;\r\n    left: calc(100% - 28px);\r\n  }\r\n`;\r\n\r\nconst Popup = ({ activeItem, colors, setIsBlured, quantity, type, user }) => {\r\n  const { id, maxQuantity } = activeItem\r\n\r\n  const [isAnimate, setIsAnimate] = useState(false)\r\n\r\n  const [isError, setIsError] = useState(false)\r\n\r\n  const form = useRef()\r\n\r\n  const handleCancel = () => {\r\n    setIsBlured(false)\r\n  }\r\n\r\n  const handleBuy = e => {\r\n    e.preventDefault()\r\n\r\n    setIsError(false)\r\n\r\n    let btn = document.querySelector('.buyButton')\r\n\r\n    let width = btn.offsetWidth;   \r\n\r\n    let emptyFields = false\r\n    const prevData = {\r\n      pseudo: '',\r\n      discord: '',\r\n      quantity: 0,\r\n      comment: '',\r\n    }\r\n    const fields = [].slice.call(form.current.querySelectorAll('.field'))\r\n    fields.forEach(field => {\r\n      if (field.value === '' || field.value > maxQuantity || field.value < 1) {\r\n        if (field.name !== 'comment') emptyFields = true\r\n      }\r\n      prevData[field.name] = field.value\r\n    })\r\n    if (!emptyFields) {\r\n\r\n      prevData['pseudo'] = user.username\r\n      prevData['discord'] = user.username + \"#\" + user.discriminator\r\n\r\n      e.preventDefault()\r\n\r\n      const uuid = uuidv4();\r\n\r\n      console.log(\r\n        `Data can be sent\\nOrder number %c${uuid}`,\r\n        'background: black; color: white; padding: 5px;'\r\n      )\r\n\r\n    \r\n      setIsAnimate(true)\r\n      setTimeout(() => {\r\n        btn.children[0].style.transition = \"opacity 0.3s\";\r\n        btn.children[0].style.opacity = \"0\";\r\n  \r\n        btn.style.width = width + \"px\";\r\n  \r\n        setTimeout(() => {\r\n          btn.children[0].innerHTML = \"Réussis\";\r\n          btn.style.background = colors.$green;\r\n          btn.children[0].style.opacity = \"1\";\r\n  \r\n          setTimeout(() => {\r\n            fetch(process.env.REACT_APP_API_URL + \"shop/buy/\" + type + \"/\" + id, {\r\n              method: 'POST',\r\n              headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n              },\r\n              body: JSON.stringify({\r\n                user: {\r\n                  username: prevData.pseudo,\r\n                  discord: prevData.discord\r\n                },\r\n                command: {\r\n                  quantity: prevData.quantity,\r\n                  commentaire: prevData.comment,\r\n                  uuid: uuid\r\n                }\r\n              })\r\n            }).then(res => res.json()).then(data => {\r\n              window.location = `/success?data=${btoa(\r\n                JSON.stringify(data)\r\n              )}`\r\n            })\r\n          },400)\r\n        },1400)\r\n      },200) \r\n    }else {\r\n      setIsError(true)\r\n      setTimeout(() => {\r\n        setIsError(false)\r\n      }, 400)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card isError={isError}>\r\n      <Subtitle\r\n        style={{ alignSelf: 'flex-start' }}\r\n        fontSize=\"1.1em\"\r\n        fontWeight=\"600\"\r\n        color={colors.$darkPurple}>\r\n        { activeItem.title}\r\n      </Subtitle>\r\n      <Paragraph fontSize=\"0.7em\" color=\"gray\">\r\n          A partir de {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(activeItem.price)}\r\n        </Paragraph>\r\n      <br></br>\r\n      <form ref={form}>\r\n        <Input isError={isError}>\r\n          <Icon src={`${process.env.PUBLIC_URL}/images/user.svg`}></Icon>\r\n          <input\r\n            type=\"text\"\r\n            name=\"pseudo\"\r\n            placeholder=\"Pseudo en jeu\"\r\n            className=\"field\"\r\n            required\r\n          />\r\n        </Input>\r\n        <Input style={{ marginTop: '20px' }}>\r\n          <Icon src={`${process.env.PUBLIC_URL}/images/user.svg`}></Icon>\r\n          <input\r\n            type=\"text\"\r\n            defaultValue={user.username + \"#\" + user.discriminator}\r\n            name=\"discord\"\r\n            className=\"field\"\r\n            disabled\r\n            required\r\n          />\r\n        </Input>\r\n        {quantity === 'true' && (\r\n          <Input style={{ marginTop: '20px', width: '40%' }}>\r\n            <input\r\n              type=\"number\"\r\n              placeholder=\"Quantité\"\r\n              style={{ width: '100%' }}\r\n              className=\"field\"\r\n              name=\"quantity\"\r\n              min=\"1\"\r\n              max={maxQuantity}\r\n              defaultValue=\"1\"\r\n              required\r\n            />\r\n          </Input>\r\n        )}\r\n        <Paragraph\r\n          color=\"black\"\r\n          fontSize=\"0.6em\"\r\n          style={{ marginTop: '20px', marginLeft: '10px' }}>\r\n          Commentaires (facultatif)\r\n        </Paragraph>\r\n        <Input style={{ marginTop: '5px' }}>\r\n          <textarea className=\"field\" name=\"comment\"></textarea>\r\n        </Input>\r\n        <Inliner style={{ marginTop: '20px', justifyContent: 'space-between' }}>\r\n          <Button2 color={colors.$darkOrange} onClick={handleCancel} style={{\r\n            opacity: isAnimate && '0',\r\n            transition: 'opacity 0.6s',\r\n          }}>\r\n            Annuler\r\n          </Button2>\r\n          <BuyButton\r\n            color=\"white\"\r\n            onClick={e => handleBuy(e)} background={ isAnimate ? colors.$blue : colors.$darkOrange} className=\"buyButton\">\r\n            <span>Acheter</span>\r\n            <SendAnimateImage src=\"/images/send.svg\" style={{\r\n              animationPlayState: isAnimate && 'running',\r\n              animationDelay: '0.5s',\r\n            }}></SendAnimateImage>\r\n          </BuyButton>\r\n        </Inliner>\r\n      </form>\r\n    </Card>\r\n  )\r\n}\r\n\r\nconst show = keyframes`\r\n  from {\r\n    opacity: 0;\r\n    margin-top: 20px;\r\n  }\r\n\r\n  to {\r\n    opacity: 1;\r\n    margin-top: 0;\r\n  }\r\n`;\r\n\r\nconst shake = keyframes`\r\n  0% {\r\n    transform: translate(-50%, -50%);\r\n  }\r\n\r\n  25% {\r\n    transform: translate(-51%, -50%);\r\n  }\r\n\r\n  50% {\r\n    transform: translate(-49.5%, -50.7%);\r\n  }\r\n  \r\n  75% {\r\n    transform: translate(-50.2%, -48.7%);\r\n  }\r\n\r\n  100% {\r\n    transform: translate(-50%, -50%);\r\n  }\r\n`;\r\n\r\nconst SendAnimateImage = styled.img`\r\n  position: absolute;\r\n  width: 25px;\r\n  left: 3px;\r\n  bottom: 0;\r\n  top: 0;\r\n  margin-top: auto;\r\n  margin-bottom: auto;\r\n  opacity: 0;\r\n  transition: all .4s;\r\n  animation: ${send} 1.2s ease-in-out forwards;\r\n  animation-play-state: paused;\r\n`\r\n\r\nconst Card = styled.div`\r\n  border: ${props => props.isError && 'solid 1px #EE3939'};\r\n  position: fixed;\r\n  z-index: 1;\r\n  width: 400px;\r\n  background: white;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  padding: 30px;\r\n  border-radius: 10px;\r\n\r\n  opacity: 0;\r\n  margin-top: 20px;\r\n\r\n  animation: ${show} 0.3s ease-in-out forwards, ${shake} 0.4s ease-in-out infinite ${props => props.isError ? 'running' : 'paused'};\r\n\r\n  @media (max-width: 768px) {\r\n    width: 90%;\r\n    min-width: 300px;\r\n  }\r\n`\r\n\r\nconst Icon = styled.img`\r\n  width: 25px;\r\n  height: 25px;\r\n  margin-left: 10px;\r\n  position: relative;\r\n  padding-right: 10px;\r\n  border-right: solid 1px #00000088;\r\n`\r\n\r\nconst Input = styled.div`\r\n  border: solid 1px ${props => props.isError ? '#EE3939' : 'black'};\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  align-items: center;\r\n  transition: border .2s;\r\n\r\n  & input {\r\n    flex: 1;\r\n    border: none;\r\n    outline: none;\r\n    padding: 10px;\r\n  }\r\n\r\n  & textarea {\r\n    width: 100%;\r\n    height: 200px;\r\n    resize: vertical;\r\n    border: none;\r\n    outline: none;\r\n    padding: 10px;\r\n  }\r\n`\r\n\r\nexport default Popup\r\n"]},"metadata":{},"sourceType":"module"}